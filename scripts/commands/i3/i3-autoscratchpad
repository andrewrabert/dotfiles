#!/usr/bin/env python3
import time

import i3ipc

NAME = 'i3-scratchpad'


def on_window_focus(self, e):
    if e.container.name != NAME:
        CONN.command(f'[title={NAME}] move scratchpad')


while True:
    try:
        CONN = i3ipc.Connection()
        CONN.on('window::focus', on_window_focus)
        CONN.main()
    except Exception:
        time.sleep(1)
    finally:
        CONN.main_quit()
