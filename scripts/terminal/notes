#!/usr/bin/env sh
set -e

NOTES_DIR="${NOTES_DIR:-$HOME/Notes}"
if ! [ -d "$NOTES_DIR" ]; then
    echo error: notes directory does not exist: \""$NOTES_DIR"\" >&2
    exit 1
fi
cd "${NOTES_DIR}"

while true; do
    case "$1" in
        --)
            shift
            exec "$@"
            ;;
        *)
            if [ -n "$1" ]; then
                mkdir -p "$(dirname "$1")"
                exec "${EDITOR}" "$1"
            else
                exec "${EDITOR}" scratch.md
            fi
            break
    esac
done
