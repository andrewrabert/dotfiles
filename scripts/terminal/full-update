#!/usr/bin/env sh
set -eu
YELLOW='\033[1;33m'
RESET_COLOR='\033[0m'

TMPDIR="${TMPDIR:-/tmp}"
if ! [ -d "$TMPDIR" ]; then
    LOGFILE='/dev/null'
else
    LOGFILE="$TMPDIR/full-update.log"
fi

full_update() {
    for cmd in "$DOTFILES/full-update/"*; do
        printf '%bNow running %s ...%b\n' "$YELLOW" "$cmd" "$RESET_COLOR"
        "$cmd"
    done
    printf '%bDoneb\n' "$YELLOW" "$RESET_COLOR"
}

full_update 2>&1 | tee "$LOGFILE"
